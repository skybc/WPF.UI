<Window
    x:Class="Wpf.Ui.Controls.FontSettingsDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:Wpf.Ui.Controls"
    xmlns:local="clr-namespace:Wpf.Ui.Controls"
    Title="字体设置"
    Width="380"
    Height="600"
    Background="{DynamicResource ApplicationBackgroundBrush}"
    ShowInTaskbar="False"
    WindowStartupLocation="CenterOwner"
    WindowStyle="None">

    <Window.Resources>
        <local:BrushToColorConverter x:Key="BrushToColorConverter" />
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  Main Content  -->
        <ScrollViewer Grid.Row="0" Padding="24,20,24,20">
            <StackPanel>

                <!--  Font Family Selection  -->
                <StackPanel Margin="0,0,0,16">
                    <TextBlock
                        Margin="0,0,0,8"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                        Text="字体系列" />
                    <ComboBox
                        x:Name="FontFamilyComboBox"
                        Height="36"
                        ItemsSource="{Binding AvailableFontFamilies}"
                        SelectedItem="{Binding FontSettings.FontFamily}"
                        SelectedValuePath="Source" />
                </StackPanel>

                <!--  Font Size Selection  -->
                <StackPanel Margin="0,0,0,16">
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBlock
                            FontSize="14"
                            FontWeight="SemiBold"
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                            Text="字体大小" />
                        <TextBlock
                            Grid.Column="1"
                            Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                            Text="{Binding FontSettings.FontSize, StringFormat={}{0:F0} pt}" />
                    </Grid>
                    <Slider
                        Height="32"
                        IsSnapToTickEnabled="True"
                        Maximum="72"
                        Minimum="8"
                        TickFrequency="2"
                        Value="{Binding FontSettings.FontSize}" />
                </StackPanel>

                <!--  Font Weight Selection  -->
                <StackPanel Margin="0,0,0,16">
                    <TextBlock
                        Margin="0,0,0,8"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                        Text="字体粗细" />
                    <ComboBox ItemsSource="{Binding AvailableFontWeights}" SelectedItem="{Binding FontSettings.FontWeight}" />
                </StackPanel>

                <!--  Font Style Selection  -->
                <StackPanel Margin="0,0,0,16">
                    <TextBlock
                        Margin="0,0,0,8"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                        Text="字体样式" />
                    <StackPanel Orientation="Horizontal">
                        <RadioButton
                            Margin="0,0,16,0"
                            Content="正常"
                            GroupName="FontStyle"
                            IsChecked="{Binding IsNormalStyle}" />
                        <RadioButton
                            Content="斜体"
                            GroupName="FontStyle"
                            IsChecked="{Binding IsItalicStyle}" />
                    </StackPanel>
                </StackPanel>

                <!--  Font Color Selection  -->
                <StackPanel Margin="0,0,0,16">
                    <TextBlock
                        Margin="0,0,0,8"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                        Text="字体颜色" />
                    <controls:ColorPicker Value="{Binding FontSettings.Foreground, Converter={StaticResource BrushToColorConverter}}" />
                </StackPanel>

                <!--  Font Preview Section  -->
                <StackPanel Margin="0,0,0,0">
                    <TextBlock
                        Margin="0,0,0,8"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                        Text="字体预览" />
                    <Border
                        Padding="16,12"
                        Background="{DynamicResource ControlFillColorDefaultBrush}"
                        BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="{DynamicResource ControlCornerRadius}">
                        <TextBlock
                            Name="PreviewTextBlock"
                            FontFamily="{Binding FontSettings.FontFamily}"
                            FontSize="{Binding FontSettings.FontSize}"
                            FontStyle="{Binding FontSettings.FontStyle}"
                            FontWeight="{Binding FontSettings.FontWeight}"
                            Foreground="{Binding FontSettings.Foreground}"
                            Text="字体预览示例文本 / Font Preview Sample Text 1234567890"
                            TextWrapping="Wrap" />
                    </Border>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <!--  Dialog Buttons  -->
        <Border
            Grid.Row="1"
            Padding="24,16"
            Background="{DynamicResource ControlFillColorSecondaryBrush}"
            BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
            BorderThickness="0,1,0,0">
            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                <Button
                    Width="80"
                    Margin="0,0,8,0"
                    Click="OnCancelClick"
                    Content="取消" />
                <Button
                    Width="80"
                    Click="OnOkClick"
                    Content="确定" />
            </StackPanel>
        </Border>
    </Grid>
</Window>
